<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Get a Quote - Framery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --primary: #000;
      --text-main: #151e20;
      --text-light: #5f6368;
      --bg-color: #ffffff;
      --input-bg: #fff;
      --input-border: #949494;
      --error: #d92d20;
      --focus-ring: #00825f;
      --product-bg: #f2f2f2;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "FFMark", system-ui, -apple-system, sans-serif;
      color: var(--text-main);
      background: #fff;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .container {
      width: 100%;
      max-width: 800px;
      padding: 40px 20px;
      margin: 0 auto;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 500;
      margin: 0 0 10px;
      letter-spacing: -0.02em;
    }

    /* Progress Bar */
    .progress-container {
      margin-bottom: 40px;
    }

    .progress-text {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .progress-track {
      height: 4px;
      background: #e6e6e6;
      border-radius: 2px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: #204ce5;
      width: 33%;
      transition: width 0.4s ease;
    }

    /* Form Steps */
    .form-step {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .form-step.active {
      display: block;
    }

    /* Products List (Step 1) */
    .product-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--product-bg);
      border-radius: 50px;
      padding: 10px 30px 10px 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .product-info {
      display: flex;
      align-items: center;
      flex: 1;
    }

    .product-img {
      width: 80px;
      height: 60px;
      object-fit: contain;
      margin-right: 20px;
    }

    .product-details h3 {
      font-size: 1.1rem;
      margin: 0 0 4px;
      font-weight: 500;
    }

    .product-details p {
      font-size: 0.85rem;
      color: var(--text-light);
      margin: 0;
    }

    .product-input {
      width: 80px;
    }

    .product-input input {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--input-border);
      border-radius: 6px;
      text-align: center;
      font-size: 1rem;
    }

    /* Inputs & Grid */
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    @media(max-width: 600px) {
      .grid-2 { grid-template-columns: 1fr; }
      .product-row { border-radius: 16px; padding: 16px; }
      .product-info { flex-direction: column; text-align: center; margin-bottom: 16px; }
      .product-img { margin: 0 0 10px 0; width: 120px; height: auto; }
      .product-input { width: 100%; }
    }

    .field-group {
      margin-bottom: 24px;
    }

    label {
      display: block;
      font-weight: 500;
      margin-bottom: 8px;
      font-size: 0.95rem;
      color: var(--text-main);
    }

    .required-star {
      color: var(--error);
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid var(--input-border);
      border-radius: 4px;
      font-size: 1rem;
      font-family: inherit;
      color: var(--text-main);
      background: #fff;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--focus-ring);
      box-shadow: 0 0 0 1px var(--focus-ring);
    }

    textarea {
      resize: vertical;
      min-height: 120px;
    }

    /* Buttons */
    .buttons-row {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }

    .buttons-row.end {
      justify-content: flex-end;
    }

    .btn {
      padding: 12px 32px;
      border-radius: 100px;
      font-weight: 500;
      font-size: 1rem;
      cursor: pointer;
      border: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .btn-primary {
      background: var(--text-main);
      color: #fff;
    }
    .btn-primary:hover {
      background: #333;
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-main);
      border: 1px solid #ccc;
    }
    .btn-secondary:hover {
      background: #f9f9f9;
    }

    .hidden-field {
      display: none;
    }

    .error-msg {
      color: var(--error);
      font-size: 0.8rem;
      margin-top: 6px;
      display: none;
    }
    .error-msg.visible { display: block; }
    .input-error { border-color: var(--error) !important; }

    /* Checkbox */
    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 16px;
    }
    .checkbox-group input {
      margin-top: 4px;
      width: 18px;
      height: 18px;
    }
    .checkbox-label {
      font-weight: 400;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .checkbox-label a {
      color: var(--text-main);
      text-decoration: underline;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <div class="container">
    <header class="header">
      <h1>Get a quote</h1>
    </header>

    <div class="progress-container">
      <div class="progress-text" id="step-indicator">Step 1 of 3</div>
      <div class="progress-track">
        <div class="progress-fill" id="progress-bar"></div>
      </div>
    </div>

    <form id="MCFUUHTTQDGVH4FDDYYE5NC7EGOA" method="POST">
      
      <!-- STEP 1: Products -->
      <div class="form-step active" data-step="0">
        <div class="field-group">
          <label style="margin-bottom: 16px; display:block;">Select products and quantities</label>
          
          <!-- Product 1 -->
          <div class="product-row">
            <div class="product-info">
              <img src="https://framery.com/wp-content/uploads/2024/03/framery-one-compact-smart-soundproof-office-phone-booth.webp" alt="Framery One Compact" class="product-img">
              <div class="product-details">
                <h3>Framery One Compact™</h3>
                <p>The smart 1-person office phone booth</p>
              </div>
            </div>
            <div class="product-input">
              <input type="number" min="0" placeholder="0" name="qty_framery_one_compact" aria-label="Quantity for Framery One Compact">
            </div>
          </div>

          <!-- Product 2 -->
          <div class="product-row">
            <div class="product-info">
              <img src="https://framery.com/wp-content/uploads/2024/03/framery-one-smart-soundproof-office-pod.webp" alt="Framery One" class="product-img">
              <div class="product-details">
                <h3>Framery One™</h3>
                <p>The smart one-person office pod</p>
              </div>
            </div>
            <div class="product-input">
              <input type="number" min="0" placeholder="0" name="qty_framery_one" aria-label="Quantity for Framery One">
            </div>
          </div>

          <!-- Product 3 -->
          <div class="product-row">
            <div class="product-info">
              <img src="https://framery.com/wp-content/uploads/2024/03/framery-four-smart-soundproof-meeting-pod.webp" alt="Framery Four" class="product-img">
              <div class="product-details">
                <h3>Framery Four™</h3>
                <p>The smart meeting pod for 1-4 people</p>
              </div>
            </div>
            <div class="product-input">
              <input type="number" min="0" placeholder="0" name="qty_framery_four" aria-label="Quantity for Framery Four">
            </div>
          </div>

          <!-- Product 4 -->
          <div class="product-row">
            <div class="product-info">
              <img src="https://framery.com/wp-content/uploads/2024/03/framery-six-smart-soundproof-meeting-room.webp" alt="Framery Six" class="product-img">
              <div class="product-details">
                <h3>Framery Six™</h3>
                <p>The smart meeting room for teams of up to 6</p>
              </div>
            </div>
            <div class="product-input">
              <input type="number" min="0" placeholder="0" name="qty_framery_six" aria-label="Quantity for Framery Six">
            </div>
          </div>

        </div>

        <div class="buttons-row end">
          <button type="button" class="btn btn-primary" data-next>Next</button>
        </div>
      </div>

      <!-- STEP 2: Contact & Location -->
      <div class="form-step" data-step="1">
        <div class="grid-2">
          <div class="field-group">
            <label for="first_name">First name<span class="required-star">*</span></label>
            <input type="text" id="first_name" name="first_name" required>
            <div class="error-msg">Required</div>
          </div>
          <div class="field-group">
            <label for="last_name">Last name<span class="required-star">*</span></label>
            <input type="text" id="last_name" name="last_name" required>
            <div class="error-msg">Required</div>
          </div>
        </div>

        <div class="grid-2">
          <div class="field-group">
            <label for="email">Email<span class="required-star">*</span></label>
            <input type="email" id="email" name="email" required>
            <div class="error-msg">Valid email required</div>
          </div>
          <div class="field-group">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone">
          </div>
        </div>

        <div class="grid-2">
          <div class="field-group">
            <label for="city">City<span class="required-star">*</span></label>
            <input type="text" id="city" name="city" required>
            <div class="error-msg">Required</div>
          </div>
          <div class="field-group">
            <label for="country">Country<span class="required-star">*</span></label>
            <select id="country" name="country" required>
              <option value="">Select country</option>
              <option value="United States">United States</option>
              <option value="Canada">Canada</option>
              <option value="United Kingdom">United Kingdom</option>
              <option value="Germany">Germany</option>
              <option value="France">France</option>
              <option value="Finland">Finland</option>
              <option value="Sweden">Sweden</option>
              <option value="Norway">Norway</option>
              <option value="Denmark">Denmark</option>
              <option value="Netherlands">Netherlands</option>
              <option value="Australia">Australia</option>
              <option value="Other">Other</option>
            </select>
            <div class="error-msg">Required</div>
          </div>
        </div>

        <!-- Conditional State Fields -->
        <div class="field-group hidden-field" id="state-wrapper-us">
          <label for="state_us">State<span class="required-star">*</span></label>
          <select id="state_us" name="state_us">
            <option value="">Select state</option>
            <option value="CA">California</option>
            <option value="NY">New York</option>
            <option value="TX">Texas</option>
            <option value="FL">Florida</option>
            <!-- Add other US states as needed -->
            <option value="Other">Other</option>
          </select>
          <div class="error-msg">Required</div>
        </div>

        <div class="field-group hidden-field" id="state-wrapper-ca">
          <label for="state_ca">Province<span class="required-star">*</span></label>
          <select id="state_ca" name="state_ca">
            <option value="">Select province</option>
            <option value="ON">Ontario</option>
            <option value="QC">Quebec</option>
            <option value="BC">British Columbia</option>
            <!-- Add other CA provinces as needed -->
            <option value="Other">Other</option>
          </select>
          <div class="error-msg">Required</div>
        </div>

        <div class="buttons-row">
          <button type="button" class="btn btn-secondary" data-prev>Previous</button>
          <button type="button" class="btn btn-primary" data-next>Next</button>
        </div>
      </div>

      <!-- STEP 3: Details & Consent -->
      <div class="form-step" data-step="2">
        <div class="field-group">
          <label for="customer_type">Choose the Best<span class="required-star">*</span></label>
          <select id="customer_type" name="customer_type" required>
            <option value="">Select Type</option>
            <option value="Individual">Individual</option>
            <option value="Business">Business</option>
            <option value="Architect">Architect</option>
          </select>
          <div class="error-msg">Required</div>
        </div>

        <!-- Conditional Company Fields -->
        <div id="company-fields" class="hidden-field">
          <div class="field-group">
            <label for="company_size">Company Size<span class="required-star">*</span></label>
            <select id="company_size" name="company_size">
              <option value="">Select Size</option>
              <option value="0-15">0-15</option>
              <option value="16-50">16-50</option>
              <option value="51-200">51-200</option>
              <option value="201+">201+</option>
            </select>
            <div class="error-msg">Required</div>
          </div>

          <div class="field-group">
            <label for="company">Your Company<span class="required-star">*</span></label>
            <input type="text" id="company" name="company">
            <div class="error-msg">Required</div>
          </div>
        </div>

        <div class="field-group">
          <label for="message">Additional message</label>
          <textarea id="message" name="message"></textarea>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="newsletter" name="newsletter" value="true">
          <label for="newsletter" class="checkbox-label">I would love to receive the Framery Newsletter.</label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="privacy" name="privacy" value="true" required>
          <label for="privacy" class="checkbox-label">
            My information can be shared with a Framery dealer located in my area. 
            Most inquiries are handled by Framery dealers and by selecting this we can provide you with faster and more accurate service. 
            <a href="#">Privacy Policy</a><span class="required-star">*</span>
          </label>
        </div>
        <div class="error-msg" data-error-for="privacy">You must agree to proceed</div>

        <!-- Hidden consolidated field to ensure all data sends to Salesforce description if schema differs -->
        <input type="hidden" name="description" id="full_description">
        <input type="hidden" name="source" value="get-a-quote-page">

        <div class="buttons-row">
          <button type="button" class="btn btn-secondary" data-prev>Previous</button>
          <button type="submit" class="btn btn-primary" id="submit-btn">Contact us</button>
        </div>
      </div>

    </form>
  </div>

  <script>
    (function () {
      const form = document.getElementById("MCFUUHTTQDGVH4FDDYYE5NC7EGOA");
      const steps = Array.from(form.querySelectorAll(".form-step"));
      const stepLabel = document.getElementById("step-indicator");
      const progressBar = document.getElementById("progress-bar");
      const submitBtn = document.getElementById("submit-btn");
      
      // Conditional Logic Elements
      const countrySelect = document.getElementById("country");
      const stateUsWrapper = document.getElementById("state-wrapper-us");
      const stateUsInput = document.getElementById("state_us");
      const stateCaWrapper = document.getElementById("state-wrapper-ca");
      const stateCaInput = document.getElementById("state_ca");
      
      const customerTypeSelect = document.getElementById("customer_type");
      const companyFieldsWrapper = document.getElementById("company-fields");
      const companySizeInput = document.getElementById("company_size");
      const companyInput = document.getElementById("company");

      let currentStep = 0;

      // 1. Navigation & Progress
      function updateUI() {
        steps.forEach((step, index) => {
          step.classList.toggle("active", index === currentStep);
        });
        
        stepLabel.textContent = `Step ${currentStep + 1} of ${steps.length}`;
        progressBar.style.width = `${((currentStep + 1) / steps.length) * 100}%`;
        window.scrollTo(0, 0);
      }

      // 2. Logic: State/Province toggle
      function handleCountryChange() {
        const val = countrySelect.value;
        
        // Reset
        stateUsWrapper.classList.add("hidden-field");
        stateUsInput.required = false;
        stateCaWrapper.classList.add("hidden-field");
        stateCaInput.required = false;

        if (val === "United States") {
          stateUsWrapper.classList.remove("hidden-field");
          stateUsInput.required = true;
        } else if (val === "Canada") {
          stateCaWrapper.classList.remove("hidden-field");
          stateCaInput.required = true;
        }
      }
      countrySelect.addEventListener("change", handleCountryChange);

      // 3. Logic: Company Fields toggle
      function handleTypeChange() {
        const val = customerTypeSelect.value;
        if (val === "Business" || val === "Architect") {
          companyFieldsWrapper.classList.remove("hidden-field");
          companySizeInput.required = true;
          companyInput.required = true;
        } else {
          companyFieldsWrapper.classList.add("hidden-field");
          companySizeInput.required = false;
          companyInput.required = false;
        }
      }
      customerTypeSelect.addEventListener("change", handleTypeChange);

      // 4. Validation
      function validateCurrentStep() {
        const step = steps[currentStep];
        // Only Select visible required inputs (avoids validating hidden conditional fields)
        const requiredInputs = Array.from(step.querySelectorAll("[required]")).filter(input => {
          return input.offsetParent !== null; // checks visibility
        });
        
        let valid = true;

        requiredInputs.forEach((input) => {
          const errorEl = input.parentElement.querySelector(".error-msg") || form.querySelector(`.error-msg[data-error-for="${input.name}"]`);
          
          if (!input.checkValidity()) {
            valid = false;
            input.classList.add("input-error");
            if (errorEl) errorEl.classList.add("visible");
          } else {
            input.classList.remove("input-error");
            if (errorEl) errorEl.classList.remove("visible");
          }
        });

        return valid;
      }

      // Live validation clear
      form.addEventListener("input", (e) => {
        if(e.target.required || e.target.classList.contains("input-error")) {
           const errorEl = e.target.parentElement.querySelector(".error-msg") || form.querySelector(`.error-msg[data-error-for="${e.target.name}"]`);
           if(e.target.checkValidity()) {
             e.target.classList.remove("input-error");
             if(errorEl) errorEl.classList.remove("visible");
           }
        }
      });

      // 5. Button Handlers
      form.addEventListener("click", (e) => {
        if (e.target.closest("[data-next]")) {
          e.preventDefault();
          if (!validateCurrentStep()) return;
          if (currentStep < steps.length - 1) {
            currentStep++;
            updateUI();
          }
        }
        if (e.target.closest("[data-prev]")) {
          e.preventDefault();
          if (currentStep > 0) {
            currentStep--;
            updateUI();
          }
        }
      });

      // 6. Submission Construction
      form.addEventListener("submit", (e) => {
        if (!validateCurrentStep()) {
          e.preventDefault();
          return;
        }
        
        submitBtn.disabled = true;
        submitBtn.textContent = "Sending...";

        // Consolidate Product Qty + Message + Type into one description block
        // This ensures the Salesforce endpoint catches the extra data even if it lacks specific columns
        const products = [
          { name: "Framery One Compact", qty: form.querySelector('[name="qty_framery_one_compact"]').value },
          { name: "Framery One", qty: form.querySelector('[name="qty_framery_one"]').value },
          { name: "Framery Four", qty: form.querySelector('[name="qty_framery_four"]').value },
          { name: "Framery Six", qty: form.querySelector('[name="qty_framery_six"]').value },
        ].filter(p => p.qty > 0).map(p => `${p.name}: ${p.qty}`).join(", ");

        const msg = document.getElementById("message").value;
        const type = customerTypeSelect.value;
        const size = companySizeInput.value;
        
        let fullDesc = `Type: ${type} | Size: ${size}\nProducts Interested: ${products || "None specified"}\n\nUser Message: ${msg}`;
        
        document.getElementById("full_description").value = fullDesc;
        
        // Let the form submit naturally to the external script handler
      });

      updateUI();
    })();
  </script>

  <!-- External Form Handler Script -->
  <script
    async
    src="https://framery--mcn21.sandbox.my.site.com/lp/assets/scripts/external-form-handler-host.min.js"
    onload="SFDCFormHandler.init('https://framery--mcn21.sandbox.my.site.com/lp')"
  ></script>
</body>
</html>
